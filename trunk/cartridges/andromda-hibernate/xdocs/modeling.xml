<?xml version="1.0" encoding="UTF-8"?>

<document>
    <properties>
      <title>Hibernate Cartridge Modeling</title>
    </properties>
    <body>
        <section name="Hibernate Cartridge Modeling">
            <p>
                The page describes the modeling standards one must follow to in order
                to use the Hibernate Cartridge.
            </p>
        </section>
        <section name="Supported Stereotypes">
            <table>
                <tr>
                    <th>Stereotype</th>
                    <th nowrap="nowrap">Model Element</th>
                    <th>Description</th>
                </tr>
                <tr>
                    <td>
                        <a name="Entity"/>
                        <strong><![CDATA[<<Entity>>]]></strong>
                    </td>
                    <td>
                        Class
                    </td>
                    <td>
                        Produces Hibernate entities.
                    </td>
                </tr>
                <tr>
                    <td>
                        <a name="Service"/>
                        <strong><![CDATA[<<Service>>]]></strong>
                    </td>
                    <td>
                        Class
                    </td>
                    <td>
                        Produces Session EJB facades for the hibernate entities.
                    </td>
                </tr>
                <tr>
                    <td>
                        <a name="Enumeration"/>
                        <strong><![CDATA[<<Enumeration>>]]></strong>
                    </td>
                  <td>
                      Class
                  </td>
                    <td>
                        Indicates that the class will be a persistent type-safe enumeration, implemented by means
                        of a Hibernate UserType.  Any attribute modeled on this entity will result in an enumeration
                        literal. You may assign an <code>initial value</code> to such an attribute, Hibernate will persist
                        that specified value for the corresponding literal. If no such value is specified the name
                        of the attribute is assumed. Make sure there are no naming collisions between the
                        initial values and the attribute names you model. <i>Please note: these enumerations
                        use a <code>String</code> in order to persist their unique value.</i>
                    </td>
                </tr>
                <tr>
                    <td>
                        <a name="Identifier"/>
                        <strong><![CDATA[<<Identifier>>]]></strong>
                    </td>
                    <td>
                        Attribute
                    </td>
                    <td>
                        Identifies an attribute as an identifier.
                    </td>
                </tr>
                <tr>
                    <td>
                        <a name="Unique"/>
                        <strong><![CDATA[<<Unique>>]]></strong>
                    </td>
                    <td>
                        Attribute
                    </td>
                    <td>
                        Identifies an attribute as unique.
                    </td>
                </tr>
                <tr>
                    <td>
                        <a name="EmbeddedValue"/>
                        <strong><![CDATA[<<EmbeddedValue>>]]></strong>
                    </td>
                    <td>
                        Class
                    </td>
                    <td>
                        Identifies a class as an <em>EmbeddedValue</em>.  This corresponds
                        to a Hibernate component in Hibernate.
                    </td>
                </tr>
            </table>
        </section>
        <section name="Supported Tagged Values">
            <subsection name="Entity Tagged Values">
                <table>
                    <tr>
                        <th>Tagged Value</th>
                        <th>Used With</th>
                        <th>Description</th>
                    </tr>
                    <tr>
                        <a name="andromda_hibernate_query"/>
                        <td>
                            @andromda.hibernate.query
                        </td>
                        <td>
                            An Entity operation marked as a <code>query</code>.
                        </td>
                        <td>
                            Defines a hibernate query expression.  Note that it's encouraged
                            to model your query body as an OCL constraint (instead of using
                            this tagged value).
                        </td>
                    </tr>
                    <tr>
                        <td>
                            @andromda.persistence.table
                        </td>
                        <td>
                            <a href="#Entity"><![CDATA[<<Entity>>]]></a> or
                            a many-to many association.
                        </td>
                        <td>
                            Defines the relational table name for entity persistence.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            @andromda.persistence.column
                        </td>
                        <td>
                            Attribute
                        </td>
                        <td>
                            Represents the column name for entity persistence.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            @andromda.persistence.column.length
                        </td>
                        <td>
                            Attribute
                        </td>
                        <td>
                            Represents the column length for entity persistence.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            @andromda.persistence.immutable
                        </td>
                        <td>
                            Class
                        </td>
                        <td>
                            Identifies an <a href="#EmbeddedValue"><![CDATA[<<EmbeddedValue>>]]></a>
                            as <em>immutable</em>.
                        </td>
                    </tr>
                    <tr>
                        <a name="andromda_hibernate_inheritance"/>
                        <td>
                            @andromda.hibernate.inheritance
                        </td>
                        <td>
                            <a href="#Entity"><![CDATA[<<Entity>>]]></a>
                        </td>
                        <td>
                            Used to override the default hibernate inheritance
                            strategy defined by the <a href="namespace.html#hibernateInheritanceStrategy">hibernateInheritanceStrategy</a> 
                            namespace property.
                            <ul>
                                Permitted values are:
                                <li>class - table per hierarchy.</li>
                                <li>subclass - table per class in hierarchy.</li>
                                <li>concrete - Table per class.</li>
                                <li>
                                    interface - Root class is defined as
                                    an interface and the attributes remapped to the subclasses.
                                    This is useful in the concrete case because it has limitations
                                    in the associations.
                                </li>
                            </ul>
                            <p>
                                 The tagged value of @andromda.hibernate.inheritance
                                 is set on the base/root class.
                                 All subclasses must then follow the same strategy unless
                                 interface or concrete is the predecessor strategy.
                                 The default strategy is defined by the 
                                 <a href="namespaces.html#hibernateInheritanceStrategy">hibernateInheritanceStrategy</a>
                                 namespace property.
                            </p>
                        </td>
                    </tr>
                    <tr>
                        <a name="andromda_persistence_column_index"/>
                        <td>
                            @andromda.persistence.column.index
                        </td>
                        <td>
                            Attribute
                        </td>
                        <td>
                            The name of an index to create on an entity attribute/column.
                        </td>
                    </tr>
                    <tr>
                        <a name="andromda_hibernate_entity_cache"/>
                        <td>
                            @andromda.hibernate.entity.cache
                        </td>
                        <td>
                            <a href="#Entity"><![CDATA[<<Entity>>]]></a>
                        </td>
                        <td>
                            Defines the cache strategy for the Entity. Permited values are:
                            <ol>
                                <li>read-write</li>
                                <li>nonstrict-read-write</li>
                                <li>read-only</li>
                            </ol>
                        </td>
                    </tr>
                    <tr>
                        <a name="andromda_hibernate_query_useCache"/>
                        <td>
                            @andromda.hibernate.query.useCache
                        </td>
                        <td>
                            <a href="#FinderMethod"><![CDATA[<<FinderMethod>>]]></a>
                        </td>
                        <td>
                            Defines is caching is enabled  for this query.
                        </td>
                    </tr>
                    <tr>
                        <a name="andromda_hibernate_entity_proxy"/>
                        <td>
                            @andromda.hibernate.entity.proxy
                        </td>
                        <td>
                            <a href="#Entity"><![CDATA[<<Entity>>]]></a>
                        </td>
                        <td>
                            Defines if a proxy will be enabled for the entity. Overrrides the "hibernateProxy" namespace property.
                            <ul>
                                Permitted values are:
                                <li>true</li>
                                <li>false</li>
                            </ul>
                        </td>
                    </tr>
                    <tr>
                        <a name="andromda_hibernate_entity_dynamicInsert"/>
                          <td>
                              @andromda.hibernate.entity.dynamicInsert
                          </td>
                        <td>
                            <a href="#Entity"><![CDATA[<<Entity>>]]></a>
                        </td>
                        <td>
                            Defines if the entity will limit the SQL insert statement to properties with values. This value overrides the <a href="namespace.html#hibernateEntityDynamicInsert">namespace property</a> for this entity.
                            <ul>
                                Permitted values are:
                                <li>true</li>
                                <li>false</li>
                            </ul>
                        </td>
                    </tr>
                    <tr>
                        <a name="andromda_hibernate_entity_dynamicUpdate"/>
                          <td>
                              @andromda.hibernate.entity.dynamicUpdate
                          </td>
                        <td>
                            <a href="#Entity"><![CDATA[<<Entity>>]]></a>
                        </td>
                        <td>
                            Defines if the entity will limit the SQL update statements to properties that are modified. This value overrides the <a href="namespace.html#hibernateEntityDynamicUpdate">namespace property</a> for this entity.
                            <ul>
                                Permitted values are:
                                <li>true</li>
                                <li>false</li>
                            </ul>
                        </td>
                    </tr>
                    <tr>
                        <a name="andromda_hibernate_ehcache_maxElementsInMemory"/>
                        <td>
                            @andromda.hibernate.ehcache.maxElementsInMemory
                        </td>
                        <td>
                            <a href="#Entity"><![CDATA[<<Entity>>]]></a>
                        </td>
                        <td>
                            EhCache property. Defines the maximum number of objects that will be created in memory.
                        </td>
                    </tr>
                    <tr>
                        <a name="andromda_hibernate_ehcache_eternal"/>
                        <td>
                            @andromda.hibernate.ehcache.eternal
                        </td>
                        <td>
                            <a href="#Entity"><![CDATA[<<Entity>>]]></a>
                        </td>
                        <td>
                             EhCache property. Defines if elements are eternal.
                            <ul>
                                Permitted values are:
                                <li>true</li>
                                <li>false</li>
                            </ul>
                        </td>
                    </tr>
                    <tr>
                        <a name="andromda_hibernate_ehcache_timeToIdleSeconds"/>
                        <td>
                            @andromda.hibernate.ehcache.timeToIdleSeconds
                        </td>
                        <td>
                            <a href="#Entity"><![CDATA[<<Entity>>]]></a>
                        </td>
                        <td>
                            EhCache property. Defines the time to idle for an element before it expires.
                        </td>
                    </tr>
                    <tr>
                        <a name="andromda_hibernate_ehcache_timeToLiveSeconds"/>
                        <td>
                            @andromda.hibernate.ehcache.timeToLiveSeconds
                        </td>
                        <td>
                            <a href="#Entity"><![CDATA[<<Entity>>]]></a>
                        </td>
                        <td>
                            EhCache property. Defines the time to live for an element before it expires.
                        </td>
                    </tr>
                    <tr>
                        <a name="andromda_hibernate_ehcache_overflowToDisk"/>
                          <td>
                              @andromda.hibernate.ehcache.overflowToDisk
                          </td>
                        <td>
                            <a href="#Entity"><![CDATA[<<Entity>>]]></a>
                        </td>
                        <td>
                            EhCache property. Defines if elements can overflow to disk
                            <ul>
                                Permitted values are:
                                <li>true</li>
                                <li>false</li>
                            </ul>
                        </td>
                    </tr>
                    <tr>
                        <a name="modeling.html#andromda.hibernate.version"/>
                          <td>
                              @andromda.hibernate.version
                          </td>
                        <td>
                            <a href="#Entity"><![CDATA[<<Entity>>]]></a>
                        </td>
                        <td>
                            Specfies wheter or not the entity will have a version property. If a value is present, then the entity will have
                            a version property with the name specified within the tagged value.
                        </td>
                    </tr>
                    <tr>
                        <a name="andromda_role_name"/>
                          <td>
                              @andromda.role.name
                          </td>
                        <td>
                            An actor with a dependency to a 
                            <a href="Service"><![CDATA[<<Service>>]]></a> or
                            a <a href="Service"><![CDATA[<<Service>>]]></a> operation.
                        </td>
                        <td>
                            Provides the ability to specify the name to be used
                            (if different than the actual name of the actor).
                        </td>
                    </tr>
                    <tr>
                        <a name="andromda_hibernate_generator_class"/>
                        <td>
                            @andromda.hibernate.generator.class
                        </td>
                        <td>
                            <a href="#Entity"><![CDATA[<<Entity>>]]></a>
                        </td>
                        <td>
                            Used to define the generator class used for the hibernate entity.
                            Any of the hibernate generator classes may be used.
                            <ul>
                                The possible options are:
                                <li>increment</li>
                                <li>identity</li>
                                <li>sequence</li>
                                <li>hilo</li>
                                <li>seqhilo</li>
                                <li>uuid.hex</li>
                                <li>uuid.string</li>
                                <li>native</li>
                                <li>assigned</li>
                                <li>foreign</li>
                            </ul>
                        </td>
                    </tr>
                </table>
            </subsection>
            <subsection name="Service Tagged Values">
                <table>
                    <tr>
                        <th>Tagged Value</th>
                        <th>Used With</th>
                        <th>Description</th>
                    </tr>
                    <tr>
                        <a name="andromda_ejb_viewType"/>
                        <td>
                            @andromda.ejb.viewType
                        </td>
                        <td>
                            <a href="#Service"><![CDATA[<<Service>>]]></a>
                        </td>
                        <td>
                            Defines the view type for a Session EJB.  If undefined, 
                            the default defined by <a href="namespace.html#ejbViewType">ejbViewType</a>
                            will be assumed.
                        </td>
                    </tr>
                    <tr>
                        <a name="andromda_ejb_transaction_type"/>
                        <td>
                            @andromda.ejb.transaction.type
                        </td>
                        <td>
                            Service Operation
                        </td>
                        <td>
                            Defines a transaction type for the method.
                            <ul>
                                Permitted values are:
                                <li>NotSupported</li>
                                <li>Supports</li>
                                <li>Required</li>
                                <li>RequiresNew</li>
                                <li>Mandatory</li>
                                <li>Never</li>
                            </ul>
                        </td>
                    </tr>
                </table>
            </subsection>
            <subsection name="Association and Association End Tagged Values">
                <table>
                    <tr>
                        <th>Tagged Value</th>
                        <th>Used With</th>
                        <th>Description</th>
                    </tr>
                    <tr>
                        <a name="andromda_hibernate_lazy"/>
                        <td>
                            @andromda.hibernate.lazy
                        </td>
                        <td>
                            Association ends between <a href="#Entity"><![CDATA[<<Entity>>]]></a> classes
                        </td>
                        <td>
                            Used to denote how a relationship must be loaded: <code>true</code> for <code>lazy</code>,
                            <code>false</code> for <code>eager</code>. Defaults to <code>false</code> for composite
                            associations (unless
                            <a href="namespace.html#compositionDefinesEagerLoading">compositionDefinesEagerLoading</a> is
                            set to <code>false</code>) and defaults to <code>true</code> for the other kinds.
                        </td>
                    </tr>
                    <tr>
                        <a name="andromda_hibernate_outerjoin"/>
                        <td>
                            @andromda.hibernate.outerjoin
                        </td>
                        <td>
                            Association ends between <a href="#Entity"><![CDATA[<<Entity>>]]></a> classes
                        </td>
                        <td>
                            Defines if Hibernate will use a outer join for fetching the given assocation end.
                            <ul>
                                Permited values are:
                                <li>auto</li>
                                <li>true</li>
                                <li>false</li>
                            </ul>
			    For Hibernate3 this will result in a fetch clause with values:
                            <ul>
                                <li>join</li>
                                <li>select</li>
                            </ul>
                        </td>
                    </tr>
                    <tr>
                         <a name="andromda_hibernate_association_cache"/>
                        <td>
                            @andromda.hibernate.association.cache
                        </td>
                        <td>
                             Association between <a href="#Entity"><![CDATA[<<Entity>>]]></a> classes
                        </td>
                        <td>
                            Defines the cache strategy for the Association. Permited values are:
                            <ol>
                                <li>read-write</li>
                                <li>nonstrict-read-write</li>
                                <li>read-only</li>
                            </ol>
                        </td>
                    </tr>
                    <tr>
                        <a name="andromda_persistence_foreign_identifier"/>
                        <td>
                            @andromda.persistence.foreign.identifier
                        </td>
                        <td>
                            AssociationEnd connecting two entities
                        </td>
                        <td>
                            Indicates whether or not the entity should use
                            the identifier of the foreign entity.  This has
                            the same effect as if you set <em>@andromda.hibernate.generator.class</em>
                            to <em>foreign</em>.
                            <strong>NOTE:</strong>
                            that this can only be applied to the child end of a
                            parent-child (one end is marked as composition)
                            one-to-one association.
                        </td>
                    </tr>
                    <tr>
                        <a name="andromda_persistence_assigned_identifier"/>
                        <td>
                            @andromda.persistence.assigned.identifier
                        </td>
                        <td>
                            An attribute marked as an <strong><![CDATA[<<Identifier>>]]></strong>.
                        </td>
                        <td>
                            Indicates whether or not the identifier is assigned (this means
                            that the identifier is manually assigned as opposed to automatically
                            generated). Note that setting this has the same affect as setting the 
                            <a href="#andromda_hibernate_generator_class">@andromda.hibernate.generator.class</a> 
                            to <em>assigned</em>, this is tagged value is just the preferred way as it can be applied
                            to other frameworks besides Hibernate.                 
                        </td>
                    </tr>
                    <tr>
                        <a name="andromda_hibernate_collection_type"/>
                        <td>
                            @andromda.hibernate.collection.type
                        </td>
                        <td>
                            Association ends between <a href="#Entity"><![CDATA[<<Entity>>]]></a> classes
                        </td>
                        <td>
                            Used to define the mapping for hibernate collections. 
                            This value overrides the <a href="namespace.html#hibernateAssociationCollectionType">namespace property</a>.
                            <ul>
                                The possible options are:
                                <li>set</li>
                                <li>map</li>
                                <li>bag</li>
                                <li>list</li>
                            </ul>
                        </td>
                    </tr>
                    <tr>
                        <a name="andromda_hibernate_sort_type"/>
                        <td>
                            @andromda.hibernate.sort.type
                        </td>
                        <td>
                            Association ends between <a href="#Entity"><![CDATA[<<Entity>>]]></a> classes
                        </td>
                        <td>
                            Used to define how elements will be sorted within the collection defined by the association. (Only available for maps and sets)
                            This value overrides the <a href="namespace.html#hibernateAssociationSortType">namespace property</a>.
                            <ul>
                                The possible options are:
                                <li>unsorted</li>
                                <li>natural</li>
                                <li>comparatorClass</li>
                            </ul>
                        </td>
                    </tr>
                    <tr>
                        <a name="andromda_hibernate_orderByColumns"/>
                        <td>
                            @andromda.hibernate.orderByColumns
                        </td>
                        <td>
                            Association ends between <a href="#Entity"><![CDATA[<<Entity>>]]></a> classes
                        </td>
                        <td>
                            Column names that will be used for sorting the collection, with asc or desc optionally.
                        </td>
                    </tr>
                    <tr>
                        <a name="andromda_hibernate_whereClause"/>
                        <td>
                            @andromda.hibernate.whereClause
                        </td>
                        <td>
                            Association ends between <a href="#Entity"><![CDATA[<<Entity>>]]></a> classes
                        </td>
                        <td>
                            Sql condition to define a subset of available data for the collection
                        </td>
                    </tr>
                    <tr>
                        <a name="andromda_hibernate_collection_index"/>
                        <td>
                            @andromda.hibernate.collection.index
                        </td>
                        <td>
                            Association ends between <a href="#Entity"><![CDATA[<<Entity>>]]></a> classes
                        </td>
                        <td>
                            Column containing the collection index, overrides the 
                            <a href="namespace.html#associationEndCollectionIndexName">associationEndCollectionIndexName</a>
                        </td>
                    </tr>
                    <tr>
                        <a name="andromda_hibernate_collection_index_type"/>
                        <td>
                            @andromda.hibernate.collection.index.type
                        </td>
                        <td>
                            Association ends between <a href="#Entity"><![CDATA[<<Entity>>]]></a> classes
                        </td>
                        <td>
                            The type of the column containing the collection index, overrides the 
                            <a href="namespace.html#associationEndCollectionIndexType">associationEndCollectionIndexType</a>
                        </td>
                    </tr>
                    <tr>
                        <a name="andromda_persistence_column_index"/>
                        <td>
                            @andromda.persistence.column.index
                        </td>
                        <td>
                            Association ends between <a href="#Entity"><![CDATA[<<Entity>>]]></a> classes
                        </td>
                        <td>
                            The name of an index to create on the foreign key generated by the association
                        </td>
                    </tr>
                    
                    <tr>
                        <a name="andromda_hibernate_cascade"/>
                        <td>
                            @andromda.hibernate.cascade
                        </td>
                        <td>
                            Association end between <a href="#Entity"><![CDATA[<<Entity>>]]></a> classes
                        </td>
                        <td> Place an individual cascade value at an association end, overriding the properties
                        hibernateDefaultCascade, hibernateCompositionCascade and hibernateAggregationCascade.
                        </td>
                    </tr>
                    
                </table>
            </subsection>
            <subsection name="Additional Remarks">
                <p>
                    Dependencies can be used between Services and Entities, they
                    won't need any stereotype assigned to them. These dependencies
                    are used to reference an entity from another entity or service,
                    or to reference a service from an entity or another service.
                </p>
                <p>
                    Entity query operations (i.e. finders) can be denoted by setting the
                    query flag on the modeled operation to true
                    (they do not require any stereotypes).
                </p>
                <p>
                    Actors represent roles within your model.  To designate that a role
                    has access to a given service you must draw a dependency from an Actor
                    to the <a href="Service"><![CDATA[<<Service>>]]></a>.  To designate the
                    role has access to to a given operation, you must draw a dependency from
                    an Actor to the operation.
                </p>
                <p>
                <strong>Transitive persistence</strong> in Hibernate is controlled by cascading Hibernate operations.
                There are four points to adjust that:
                <ul>
                <li>the <a href="namespace.html#hibernateDefaultCascade">hibernateDefaultCascade</a> namespace property:
                the overall default for cascade
                </li>
                <li>the <a href="namespace.html#hibernateCompositionCascade">hibernateCompositionCascade</a> namespace property:
                   how an UML composition should be interpreted as cascade
                </li>         
                <li>the <a href="namespace.html#hibernateAggregationCascade">hibernateAggregationCascade</a> namespace property:
                   how an UML aggregation should be interpreted as cascade
                </li>
                <li>the <a href="modeling.html#andromda_hibernate_cascade">@andromda.hibernate.cascade tagged value</a>
                   at the individual association end
                </li>
                </ul>
                The idea is to visualize the cascading hierarchie by using UML composition and aggregation. The inverse
                direction is marked with cascade="none" to get a clear direction.
                </p>
            </subsection>
        </section>
    </body>
</document>