<cartridge name="hibernate">

    <templateEngine>
        <macrolibrary name="templates/hibernate/hibernate.java.vm" />
        <macrolibrary name="templates/hibernate2/hibernate.hbm.xml.vm" />
        <macrolibrary name="templates/hibernate3/hibernate.hbm.xml.vm" />
        <!-- cartridge-macrolibrary merge-point-->
    </templateEngine> 

    <!-- define the template objects that are made availble to the template -->
    <templateObject name="stringUtils" className="org.apache.commons.lang.StringUtils"/>
    <templateObject name="hibernateUtils" className="org.andromda.cartridges.hibernate.HibernateUtils"/>
    <!-- cartridge-templateObject merge-point-->

    <property reference="securityRealm" default=""/>
    <property reference="customTypesPackage" default="org.andromda.persistence.hibernate"/>
    <!-- contains the package for the Hibernate user types -->
    <property reference="userTypesPackage" default="org.andromda.persistence.hibernate.usertypes"/>
    <!-- the name to give the service locator class -->
    <property reference="version" default="2"/>
    <property reference="serviceLocatorName" default="ServiceLocator"/>
    <property reference="sequenceIdentifierSuffix" default="_SEQ"/>
    <property reference="driver" default=""/>
    <property reference="username" default=""/>
    <property reference="password" default=""/>
    <property reference="connectionUrl" default=""/>
    <property reference="dataSource" default=""/>
    <property reference="hibernateDefaultCascade" default="none"/>
    <property reference="hibernatePoolSize" default=""/>
    <property reference="hibernateTransactionFactoryClass" default="net.sf.hibernate.transaction.JTATransactionFactory"/>
    <property reference="hibernateTransactionManagerStrategy" default=""/>
    <property reference="hibernateUserTransactionName" default="UserTransaction"/>
    <property reference="hibernateTransactionManagerLookup" default=""/>
    <property reference="hibernateUseOuterJoin" default=""/>
    <property reference="hibernateShowSql" default=""/>
    <property reference="hibernateJndiName" default="java:/hibernate/SessionFactory"/>
    <property reference="hibernateDialect" default=""/>
    <property reference="hibernateDefaultSchema" default=""/>
    <property reference="hibernateMaxFetchDepth" default=""/>
    <property reference="hibernateJdbcFetchSize" default=""/>
    <property reference="hibernateJdbcBatchSize" default=""/>
    <property reference="hibernateJdbcUseScrollableResultSet" default=""/>
    <property reference="hibernateMaxFetchDepth" default=""/>
    <property reference="hibernateJdbcUseStreamsForBinary" default=""/>
    <property reference="hibernateHbm2DDLAuto" default=""/>
    <property reference="hibernateQuerySubstitutions" default=""/>
    <property reference="hibernateEnableCache" default="false"/>
    <property reference="hibernateEnableAssociationsCache" default="false"/>
    <property reference="hibernateEhCacheDiskStore" default="java.io.tmpdir"/>
    <property reference="hibernateCacheProvider" default="net.sf.hibernate.cache.EhCacheProvider"/>
    <property reference="hibernateQueryCacheFactory" default="net.sf.hibernate.cache.StandardQueryCacheFactory"/>
    <property reference="xmlEncoding" default="UTF-8"/>
    <property reference="generateEntityEqualsAndHashCode" default="true"/>
    <property reference="hibernateProxy" default="false"/>
    <!-- This property is only relevant for Hibernate 3 -->
    <property reference="hibernateQueryFactory" default="org.hibernate.hql.classic.ClassicQueryTranslatorFactory"/>

    <!-- cartridge-property merge-point-->

    <!-- cartridge-resource merge-point -->

    <!-- hibernate 2 templates -->
    <template
        path="templates/hibernate2/ejb/HibernateEntityFactory.vsl"
        outputPattern="{0}/{1}Factory.java"
        outlet="session-beans"
        overwrite="true"
        required="false">
        <modelElements variable="entity">
            <modelElement>
                <type name="org.andromda.cartridges.hibernate.metafacades.HibernateEntity">
                <property name="version">2</property>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/hibernate2/hibernate.cfg.xml.vsl"
        outputPattern="hibernate.cfg.xml"
        outlet="configuration"
        overwrite="true"
        outputToSingleFile="true"
        required="false"
        outputOnEmptyElements="false">
        <modelElements variable="entities">
            <modelElement>
                <type name="org.andromda.cartridges.hibernate.metafacades.HibernateEntity">
                    <property name="requiresMapping"/>
                    <property name="version">2</property>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/hibernate2/hibernate.hbm.xml.vsl"
        outputPattern="$generatedFile"
        outlet="entities"
        overwrite="true"
        required="true">
        <modelElements variable="entity">
            <modelElement>
                <type name="org.andromda.cartridges.hibernate.metafacades.HibernateEntity">
                    <property name="requiresMapping"/>
                    <property name="version">2</property>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <!-- hibernate 3 templates -->
    <template
        path="templates/hibernate3/ejb/HibernateEntityFactory.vsl"
        outputPattern="{0}/{1}Factory.java"
        outlet="session-beans"
        overwrite="true"
        required="false">
        <modelElements variable="entity">
            <modelElement>
                <type name="org.andromda.cartridges.hibernate.metafacades.HibernateEntity">
                    <property name="version">3</property>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/hibernate3/hibernate.cfg.xml.vsl"
        outputPattern="hibernate.cfg.xml"
        outlet="configuration"
        overwrite="true"
        outputToSingleFile="true"
        required="false"
        outputOnEmptyElements="false">
        <modelElements variable="entities">
            <modelElement>
                <type name="org.andromda.cartridges.hibernate.metafacades.HibernateEntity">
                    <property name="requiresMapping"/>
                    <property name="version">3</property>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/hibernate3/hibernate.hbm.xml.vsl"
        outputPattern="$generatedFile"
        outlet="entities"
        overwrite="true"
        required="true">
        <modelElements variable="entity">
            <modelElement>
                <type name="org.andromda.cartridges.hibernate.metafacades.HibernateEntity">
                    <property name="requiresMapping"/>
                    <property name="version">3</property>
                </type>
            </modelElement>
        </modelElements>
    </template>
    
    <!-- common templates -->
    <template
        path="templates/hibernate/HibernateEmbeddedValue.vsl"
        outputPattern="$generatedFile"
        outlet="entities"
        overwrite="true"
        required="false">
        <modelElements variable="embeddedValue">
            <modelElement>
                <type name="org.andromda.cartridges.hibernate.metafacades.HibernateEmbeddedValue"/>
            </modelElement>
        </modelElements>
    </template>
    
    <template
        path="templates/hibernate/HibernateEmbeddedValueImpl.vsl"
        outputPattern="$generatedFile"
        outlet="entity-impls"
        overwrite="false">
        <modelElements variable="embeddedValue">
            <modelElement>
                <type name="org.andromda.cartridges.hibernate.metafacades.HibernateEmbeddedValue"/>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/hibernate/HibernateEntity.vsl"
        outputPattern="$generatedFile"
        outlet="entities"
        overwrite="true"
        required="false">
        <modelElements variable="entity">
            <modelElement>
                <type name="org.andromda.cartridges.hibernate.metafacades.HibernateEntity"/>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/hibernate/HibernateEntityImpl.vsl"
        outputPattern="$generatedFile"
        outlet="entities"
        overwrite="true">
        <modelElements variable="entity">
            <modelElement>
                <type name="org.andromda.cartridges.hibernate.metafacades.HibernateEntity">
                    <property name="businessOperationsPresent">false</property>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/hibernate/HibernateEntityImplManual.vsl"
        outputPattern="$generatedFile"
        outlet="entity-impls"
        overwrite="false">
        <modelElements variable="entity">
            <modelElement>
                <type name="org.andromda.cartridges.hibernate.metafacades.HibernateEntity">
                    <property name="businessOperationsPresent"/>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/hibernate/usertypes/HibernateByteBlobType.vsl"
        outputPattern="$generatedFile"
        outlet="entities"
        overwrite="true"
        required="false"/>

    <template
        path="templates/hibernate/usertypes/HibernateStringClobType.vsl"
        outputPattern="$generatedFile"
        outlet="entities"
        overwrite="true"
        required="false"/>

    <template
        path="templates/hibernate/HibernateEnumeration.vsl"
        outputPattern="$generatedFile"
        outlet="entities"
        overwrite="true"
        required="false">
        <modelElements variable="enumeration">
            <modelElement>
                <type name="org.andromda.metafacades.uml.EnumerationFacade"/>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/hibernate/ejb/ejb-jar.xml.vsl"
        outputPattern="META-INF/ejb-jar.xml"
        outlet="session-beans"
        overwrite="true"
        required="false"
        outputToSingleFile="true"
        outputOnEmptyElements="false">
        <modelElements variable="services">
           <modelElement>
                <type name="org.andromda.metafacades.uml.Service"/>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/hibernate/ejb/jboss.xml.vsl"
        outputPattern="META-INF/jboss.xml"
        outlet="session-beans"
        overwrite="true"
        required="false"
        outputToSingleFile="true"
        outputOnEmptyElements="false">
        <modelElements variable="services">
            <modelElement>
                <type name="org.andromda.metafacades.uml.Service"/>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/hibernate/ejb/HibernateSessionEJBLocator.vsl"
        outputPattern="$generatedFile"
        outlet="session-beans"
        overwrite="true"
        required="false"
        outputToSingleFile="true"
        outputOnEmptyElements="false">
        <modelElements variable="services">
            <modelElement>
                <type name="org.andromda.metafacades.uml.Service"/>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/hibernate/ejb/HibernateSessionBean.vsl"
        outputPattern="{0}/{1}Bean.java"
        outlet="session-beans"
        overwrite="true"
        required="false">
        <modelElements variable="service">
            <modelElement>
                <type name="org.andromda.metafacades.uml.Service"/>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/hibernate/ejb/HibernateSessionBeanImpl.vsl"
        outputPattern="{0}/{1}BeanImpl.java"
        outlet="session-impls"
        overwrite="false"
        required="false">
        <modelElements variable="service">
            <modelElement>
                <type name="org.andromda.metafacades.uml.Service"/>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/hibernate/ejb/HibernateSession.vsl"
        outputPattern="$generatedFile"
        outlet="session-beans"
        overwrite="true"
        required="false">
        <modelElements variable="service">
            <modelElement>
                <type name="org.andromda.metafacades.uml.Service"/>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/hibernate/ejb/HibernateSessionHome.vsl"
        outputPattern="$generatedFile"
        outlet="session-beans"
        overwrite="true"
        required="false">
        <modelElements variable="service">
            <modelElement>
                <type name="org.andromda.metafacades.uml.Service"/>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/hibernate/ejb/HibernateUtils.vsl"
        outputPattern="$generatedFile"
        outlet="session-beans"
        overwrite="true"
        required="false"/>

    <template
        path="templates/hibernate/ehcache.xml.vsl"
        outputPattern="ehcache.xml"
        outlet="configuration"
        overwrite="true"
        outputToSingleFile="true"
        required="false"
        outputOnEmptyElements="false">
        <modelElements variable="entities">
            <modelElement>
                <type name="org.andromda.metafacades.uml.Entity"/>
            </modelElement>
        </modelElements>
    </template>

    <!-- cartridge-template merge-point -->

</cartridge>
