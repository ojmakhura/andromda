<cartridge>

    <templateEngine className="org.andromda.templateengines.velocity.VelocityTemplateEngine">
        <macrolibrary name="templates/jsf2/escapeMacros.vm"/>
        <macrolibrary name="templates/jsf2/controllers/Controller.java.vm"/>
        <macrolibrary name="templates/jsf2/views/facelets/trinidad/renderActionFormInputTrinidad.vm"/>
        <macrolibrary name="templates/jsf2/views/facelets/primefaces/renderActionFormInputPrimeFaces.vm"/>
        <macrolibrary name="templates/jsf2/views/renderActionCommandLinkParameter.vm"/>
        <macrolibrary name="templates/jsf2/views/renderTableCommandLinkParameters.vm"/>
        <macrolibrary name="templates/jsf2/forms/formMacros.vm"/>
        <macrolibrary name="templates/jsf2/forms/formImplMacros.vm"/>
        <macrolibrary name="templates/jsf2/configuration/securityMacros.vm"/>
        <!-- cartridge-macrolibrary merge-point-->
    </templateEngine>

    <!-- define the template objects that are made available to the template -->
    <templateObject name="stringUtils" className="org.andromda.utils.StringUtilsHelper"/>
    <templateObject name="jsfUtils" className="org.andromda.cartridges.jsf2.JSFUtils">
        <property reference="strictDateTimeFormat"/>
    </templateObject>
    
    <!-- cartridge-templateObject merge-point-->

    <templatePostProcessor className="org.andromda.core.common.ImportBeautifierPostProcessorImpl"/>

    <property reference="generateCrudImpls"/>
    <property reference="useAjax"/>
    <property reference="componentSet"/>
    <property reference="xmlEncoding"/>
    <property reference="facesConfig"/>
    <property reference="jspIncludes"/>
    <property reference="messageResources"/>
    <property reference="facesServletExtension"/>
    <property reference="managedBeansPackage"/>
    <property reference="applicationName"/>
    <property reference="exceptionHandlerPattern"/>
    <property reference="converterPattern"/>
    <property reference="actionFormKey"/>
    <property reference="defaultDateFormat"/>
    <property reference="defaultTimeFormat"/>
    <property reference="dummyData"/>
    <property reference="fileTypeName"/>
    <property reference="securityRealm"/>
    <property reference="authenticationType"/>
    <property reference="loginFileName"/>
    <property reference="logoutFileName"/>
    <property reference="virtualHost"/>
    <property reference="defaultMultiSelectSize"/>
    <property reference="distributable"/>
    <property reference="stateSavingMethod"/>
    <property reference="sessionTimeout"/>
    <property reference="toDoTag"/>
    <property reference="enableFaceletsDevelopmentSupport"/>
    <property reference="enableMyFacesDevelopmentSupport"/>
    <property reference="strictDateTimeFormat"/>
    <property reference="libraries"/>
    <property reference="custom-resources"/>
    <property reference="formMessagesProperty"/>
    <property reference="maxTableRows"/>
    <property reference="navigationStyle"/>
    <property reference="fileUploadMaxMemoryPerRequest"/>
    <property reference="fileUploadMaxDiskSpacePerRequest"/>
    <property reference="navigationUsesRedirect"/>
    <property reference="defaultTableExportTypes"/>
    <property reference="crudValueObjectSuffix"/>
    <property reference="crudConfirmationMessages"/>
    <property reference="defaultRole"/>
    <property reference="loginConfigAuthMethod"/>
    <property reference="facesConfigFiles"/>
    <property reference="controllerScope"/>
    <property reference="navigationBeanScope"/>
    <property reference="trimInputStrings"/>

    <!-- cartridge-property merge-point -->

    <condition name="authTypeSecurityFilter">$authenticationType.equalsIgnoreCase("securityFilter")</condition>
    <condition name="ajax">$useAjax.equalsIgnoreCase("true")</condition>
    <condition name="trinidad">$componentSet.equalsIgnoreCase("trinidad")</condition>
    <condition name="primefaces">$componentSet.equalsIgnoreCase("primefaces")</condition>
    <condition name="outputCustomResources">$stringUtils.isNotBlank($custom-resources)</condition>
    <condition name="faceletsDevelopmentSupportEnabled">$enableFaceletsDevelopmentSupport.equalsIgnoreCase("true")</condition>
    <condition name="enableMyFacesDevelopmentSupport">$enableMyFacesDevelopmentSupport.equalsIgnoreCase("true")</condition>
    <condition name="outputLibraries">$stringUtils.isNotBlank($libraries)</condition>
    <condition name="securityEnabled">$stringUtils.isNotBlank($securityRealm)</condition>
    <condition name="navigationUsesRedirect">$navigationUsesRedirect.equalsIgnoreCase("true")</condition>
    <condition name="trimInputStrings">$trimInputStrings.equalsIgnoreCase("true")</condition>

    <!-- condition merge-point-->

    <!-- cartridge-resource merge-point -->

    <resource
        path="resources/views/js/*"
        outputPattern="resources/js/{0}"
        outlet="views"
        overwrite="true"/>

    <resource
        path="resources/components/setFocus.xhtml"
        outputPattern="resources/components/setFocus.xhtml"
        outlet="views"
        overwrite="true"/>
        
    <resource
        path="resources/components/closeDialog.xhtml"
        outputPattern="closeDialog.xhtml"
        outlet="views"
        overwrite="true"/>

    <!-- Trinidad specific -->

    <resource
        path="resources/views/images/trinidad/*"
        outputPattern="images/{0}"
        outlet="views"
        overwrite="true"
        outputCondition="trinidad"/>

    <resource
        path="resources/views/css/trinidad/*"
        outputPattern="css/{0}"
        outlet="views"
        overwrite="true"
        outputCondition="trinidad"/>

    <resource
        path="resources/views/css/trinidad/autocomplete/*"
        outputPattern="css/autocomplete/{0}"
        outlet="views"
        overwrite="true"
        outputCondition="trinidad"/>

    <resource
        path="resources/components/trinidad/autocomplete-body.xhtml"
        outputPattern="resources/components/autocomplete-body.xhtml"
        outlet="views"
        overwrite="true"
        outputCondition="trinidad"/>

    <resource
        path="resources/components/trinidad/autocomplete.xhtml"
        outputPattern="resources/components/autocomplete.xhtml"
        outlet="views"
        overwrite="true"
        outputCondition="trinidad"/>

    <resource
        path="resources/components/trinidad/autocompleteMulti.xhtml"
        outputPattern="resources/components/autocompleteMulti.xhtml"
        outlet="views"
        overwrite="true"
        outputCondition="trinidad"/>
        
    <resource
        path="resources/components/trinidad/useCaseDialog.xhtml"
        outputPattern="resources/components/useCaseDialog.xhtml"
        outlet="views"
        overwrite="true"
        outputCondition="trinidad"/>

    <!-- PrimeFaces specific -->

    <resource
        path="resources/views/css/primefaces/*"
        outputPattern="resources/css/{0}"
        outlet="views"
        overwrite="true"
        outputCondition="primefaces"/>

    <resource
        path="resources/views/images/primefaces/*"
        outputPattern="resources/images/{0}"
        outlet="views"
        overwrite="true"
        outputCondition="primefaces"/>
        
    <resource
        path="resources/components/primefaces/useCaseDialog.xhtml"
        outputPattern="resources/components/useCaseDialog.xhtml"
        outlet="views"
        overwrite="true"
        outputCondition="primefaces"/>

    <resource
        path="resources/components/primefaces/autoCompleteNew.xhtml"
        outputPattern="resources/components/autoCompleteNew.xhtml"
        outlet="views"
        overwrite="true"
        outputCondition="primefaces"/>

    <!-- process templates on model elements -->
    
    <template
        path="templates/jsf2/configuration/web.xml.vsl"
        outputPattern="WEB-INF/web.xml"
        outlet="configuration"
        overwrite="true"
        outputToSingleFile="true">
        <modelElements>
            <modelElement variable="useCases">
                <type name="org.andromda.metafacades.uml.FrontEndUseCase"/>
            </modelElement>
            <modelElement variable="manageables">
                <type name="org.andromda.cartridges.jsf2.metafacades.JSFManageableEntity">
                    <property name="needsUserInterface"/>
                </type>
            </modelElement>
            <modelElement variable="roles">
                <type name="org.andromda.metafacades.uml.Role"/>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/jsf2/configuration/securityfilter-config.xml.vsl"
        outputPattern="WEB-INF/securityfilter-config.xml"
        outlet="configuration"
        overwrite="true"
        outputToSingleFile="true"
        outputCondition="authTypeSecurityFilter">
        <modelElements>
            <modelElement variable="useCases">
                <type name="org.andromda.metafacades.uml.FrontEndUseCase"/>
            </modelElement>
            <modelElement variable="manageables">
                <type name="org.andromda.cartridges.jsf2.metafacades.JSFManageableEntity">
                    <property name="needsUserInterface"/>
                </type>
            </modelElement>
            <modelElement variable="roles">
                <type name="org.andromda.metafacades.uml.Role"/>
            </modelElement>
        </modelElements>
    </template>
    
    <template
        path="templates/jsf2/configuration/faces-config.xml.vsl"
        outputPattern="WEB-INF/$facesConfig"
        outlet="configuration"
        overwrite="true"
        outputToSingleFile="true">
        <modelElements>
            <modelElement variable="controllers">
                <type name="org.andromda.metafacades.uml.FrontEndController">
                    <property name="useCase"/>
                </type>
            </modelElement>
            <modelElement variable="useCases">
                <type name="org.andromda.metafacades.uml.FrontEndUseCase"/>
            </modelElement>
            <modelElement variable="enumerations">
                <type name="org.andromda.cartridges.jsf2.metafacades.JSFEnumeration"/>
            </modelElement>
            <modelElement variable="manageables">
                <type name="org.andromda.cartridges.jsf2.metafacades.JSFManageableEntity">
                    <property name="needsUserInterface"/>
                </type>
            </modelElement>
            <modelElement variable="allManageables">
                <type name="org.andromda.cartridges.jsf2.metafacades.JSFManageableEntity"/>
            </modelElement>
            <modelElement variable="applicationUseCases">
                <type name="org.andromda.metafacades.uml.FrontEndUseCase">
                    <property name="entryUseCase"/>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/jsf2/configuration/log4j.xml.vsl"
        outputPattern="WEB-INF/classes/log4j.xml"
        outlet="configuration"
        overwrite="false"
        outputToSingleFile="true"/>

    <template
        path="templates/jsf2/utils/ControllerBase.java.vsl"
        outputPattern="$stringUtils.replace($managedBeansPackage, '.', '/')/${className}.java"
        outlet="managed-beans"
        overwrite="true"/>
        
    <template
        path="templates/jsf2/utils/CrudControllerBase.java.vsl"
        outputPattern="$stringUtils.replace($managedBeansPackage, '.', '/')/${className}.java"
        outlet="managed-beans"
        overwrite="true"/>
        
    <template
        path="templates/jsf2/forms/Form.java.vsl"
        outputPattern="$generatedFile"
        outlet="forms"
        overwrite="true">
        <modelElements variable="operation">
            <modelElement>
                <type name="org.andromda.metafacades.uml.FrontEndControllerOperation">
                    <property name="formFields"/>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/jsf2/forms/FormImpl.java.vsl"
        outputPattern="$generatedFile"
        outlet="forms"
        overwrite="true">
        <modelElements variable="action">
            <modelElement>
                <type name="org.andromda.metafacades.uml.FrontEndAction">
                    <property name="formFields"/>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/jsf2/controllers/ControllerImpl.java.vsl"
        outputPattern="$generatedFile"
        outlet="controller-impls"
        overwrite="false">
        <modelElements variable="controller">
            <modelElement>
                <type name="org.andromda.metafacades.uml.FrontEndController">
                    <property name="useCase"/>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/jsf2/controllers/Controller.java.vsl"
        outputPattern="$generatedFile"
        outlet="controllers"
        overwrite="true">
        <modelElements variable="controller">
            <modelElement>
                <type name="org.andromda.metafacades.uml.FrontEndController">
                    <property name="useCase"/>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/jsf2/controllers/SessionObject.java.vsl"
        outputPattern="${sessionObject.fullPath}.java"
        outlet="controllers"
        overwrite="true">
        <modelElements variable="sessionObject">
            <modelElement>
                <type name="org.andromda.cartridges.jsf2.metafacades.JSFSessionObject"/>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/jsf2/messages/messages.properties.vsl"
        outputPattern="WEB-INF/classes/${messageResources}.properties"
        outlet="messages"
        overwrite="true"
        outputToSingleFile="true">
        <modelElements>
            <modelElement variable="applicationUseCases">
                <type name="org.andromda.metafacades.uml.FrontEndUseCase">
                    <property name="entryUseCase"/>
                </type>
            </modelElement>
            <modelElement variable="enumerations">
                <type name="org.andromda.cartridges.jsf2.metafacades.JSFEnumeration"/>
            </modelElement>
            <!-- the crud entity messages are also generated in this bundle -->
            <modelElement variable="manageables">
                <type name="org.andromda.cartridges.jsf2.metafacades.JSFManageableEntity">
                    <property name="needsUserInterface"/>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/jsf2/flow/ActionForward.java.vsl"
        outputPattern="$action.fullyQualifiedActionClassPath"
        outlet="controllers"
        overwrite="true">
        <modelElements>
            <modelElement variable="action">
                <type name="org.andromda.metafacades.uml.FrontEndUseCase"/>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/jsf2/converters/EnumerationConverter.java.vsl"
        outputPattern="${enumeration.converterPath}.java"
        outlet="controllers"
        overwrite="true">
        <modelElements variable="enumeration">
            <modelElement>
                <type name="org.andromda.cartridges.jsf2.metafacades.JSFEnumeration"/>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/jsf2/flow/LogOutServlet.java.vsl"
        outputPattern="$stringUtils.replace($managedBeansPackage, '.', '/')/LogOutServlet.java"
        outlet="controllers"
        overwrite="true"
        outputToSingleFile="true"
        outputOnEmptyElements="false"
        outputCondition="securityEnabled">
        <modelElements>
            <modelElement variable="applicationUseCases">
                <type name="org.andromda.metafacades.uml.FrontEndUseCase">
                    <property name="entryUseCase"/>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/jsf2/utils/Messages.java.vsl"
        outputPattern="$stringUtils.replace($managedBeansPackage, '.', '/')/Messages.java"
        outlet="managed-beans"
        overwrite="true"/>

    <template
        path="templates/jsf2/utils/JsfUtils.java.vsl"
        outputPattern="$stringUtils.replace($managedBeansPackage, '.', '/')/JsfUtils.java"
        outlet="managed-beans"
        overwrite="true"/>

    <template
        path="templates/jsf2/utils/UseCasePhaseListener.java.vsl"
        outputPattern="$stringUtils.replace($managedBeansPackage, '.', '/')/UseCasePhaseListener.java"
        outlet="managed-beans"
        overwrite="true"/>

    <template
        path="templates/jsf2/exception/JsfExceptionHandlerFactory.java.vsl"
        outputPattern="$stringUtils.replace($managedBeansPackage, '.', '/')/JsfExceptionHandlerFactory.java"
        outlet="managed-beans"
        overwrite="true"/>

    <template
        path="templates/jsf2/exception/JsfExceptionHandler.java.vsl"
        outputPattern="$stringUtils.replace($managedBeansPackage, '.', '/')/JsfExceptionHandler.java"
        outlet="managed-beans"
        overwrite="true"/>

    <template
        path="templates/jsf2/exception/ValidationException.java.vsl"
        outputPattern="$stringUtils.replace($managedBeansPackage, '.', '/')/ValidationException.java"
        outlet="exceptions"
        overwrite="true"/>

    <template
        path="templates/jsf2/utils/FacesContextUtils.java.vsl"
        outputPattern="$stringUtils.replace($managedBeansPackage, '.', '/')/${className}.java"
        outlet="managed-beans"
        overwrite="true"/>

    <template
        path="templates/jsf2/views/jsp/index.jsp.vsl"
        outputPattern="index.jsp"
        outlet="views"
        overwrite="true"
        outputToSingleFile="true"
        outputOnEmptyElements="false">
        <modelElements>
            <modelElement variable="applicationUseCases">
                <type name="org.andromda.metafacades.uml.FrontEndUseCase">
                    <property name="entryUseCase"/>
                </type>
            </modelElement>
            <modelElement variable="manageables">
                <type name="org.andromda.cartridges.jsf.metafacades.JSFManageableEntity">
                    <property name="needsUserInterface"/>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/jsf2/views/jsp/403.jsp.vsl"
        outputPattern="403.jsp"
        outlet="views"
        overwrite="true"
        outputToSingleFile="true"
        outputOnEmptyElements="false">
        <modelElements>
            <modelElement variable="applicationUseCases">
                <type name="org.andromda.metafacades.uml.FrontEndUseCase">
                    <property name="entryUseCase"/>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <!-- Facelets specific view rendering -->

    <template
        path="templates/jsf2/configuration/ajsf.taglib.xml.vsl"
        outputPattern="WEB-INF/ajsf.taglib.xml"
        outlet="views"
        overwrite="true"
        generateEmptyFiles="true"/>

    <!-- Test classes -->

<!--     
    <template
        path="templates/jsf2/test/FormAccess.java.vsl"
        outputPattern="$generatedFile"
        outlet="test"
        overwrite="true">
        <modelElements variable="action">
            <modelElement>
                <type name="org.andromda.metafacades.uml.FrontEndAction">
                    <property name="formFields"/>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/jsf2/test/TestSuiteBase.java.vsl"
        outputPattern="$stringUtils.replace($managedBeansPackage, '.', '/')/${className}.java"
        outlet="test"
        overwrite="true"
        outputToSingleFile="true">
        <modelElements>
            <modelElement variable="useCases">
                <type name="org.andromda.metafacades.uml.FrontEndUseCase">
                    <property name="views"/>
                </type>
            </modelElement>
        </modelElements>
    </template>
        
    <template
        path="templates/jsf2/test/DBUtil.java.vsl"
        outputPattern="$stringUtils.replace($managedBeansPackage, '.', '/')/${className}.java"
        outlet="test"
        overwrite="true"/>

    <template
        path="templates/jsf2/test/FieldValue.java.vsl"
        outputPattern="$stringUtils.replace($managedBeansPackage, '.', '/')/${className}.java"
        outlet="test"
        overwrite="true"/>

    <template
        path="templates/jsf2/test/SelectFieldValue.java.vsl"
        outputPattern="$stringUtils.replace($managedBeansPackage, '.', '/')/${className}.java"
        outlet="test"
        overwrite="true"/>

    <template
        path="templates/jsf2/test/SelectMultipleFieldValue.java.vsl"
        outputPattern="$stringUtils.replace($managedBeansPackage, '.', '/')/${className}.java"
        outlet="test"
        overwrite="true"/>                        

    <template
        path="templates/jsf2/test/PageBase.java.vsl"
        outputPattern="$stringUtils.replace($managedBeansPackage, '.', '/')/${className}.java"
        outlet="test"
        overwrite="true"/>
        
    <template
        path="templates/jsf2/test/PropertiesUtil.java.vsl"
        outputPattern="$stringUtils.replace($managedBeansPackage, '.', '/')/${className}.java"
        outlet="test"
        overwrite="true"/>        

    <template
        path="templates/jsf2/test/PageObject.java.vsl"
        outputPattern="$generatedFile"
        outlet="test"
        overwrite="true">
        <modelElements variable="view">
            <modelElement>
                <type name="org.andromda.metafacades.uml.FrontEndView">
                </type>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/jsf2/test/PageImplObject.java.vsl"
        outputPattern="$generatedFile"
        outlet="test-impls"
        overwrite="false">
        <modelElements variable="view">
            <modelElement>
                <type name="org.andromda.metafacades.uml.FrontEndView">
                </type>
            </modelElement>
        </modelElements>
    </template>    

    <template
        path="templates/jsf2/test/TestInfoBaseObject.java.vsl"
        outputPattern="$stringUtils.replace($useCase.packageName, '.', '/')/${className}.java"
        outlet="test"
        overwrite="true">
        <modelElements>
            <modelElement variable="useCase">
                <type name="org.andromda.metafacades.uml.FrontEndUseCase">
                    <property name="views"/>
                </type>
            </modelElement>
        </modelElements>
    </template>
    
    <template
        path="templates/jsf2/test/TestInfoImplObject.java.vsl"
        outputPattern="$stringUtils.replace($useCase.packageName, '.', '/')/${className}.java"
        outlet="test-impls"
        overwrite="false">
        <modelElements>
            <modelElement variable="useCase">
                <type name="org.andromda.metafacades.uml.FrontEndUseCase">
                    <property name="views"/>
                </type>
            </modelElement>
        </modelElements>
    </template>    
    
    <template
        path="templates/jsf2/test/TestCaseBaseObject.java.vsl"
        outputPattern="$stringUtils.replace($useCase.packageName, '.', '/')/${className}.java"
        outlet="test"
        overwrite="true">
        <modelElements>
            <modelElement variable="useCase">
                <type name="org.andromda.metafacades.uml.FrontEndUseCase">
                    <property name="views"/>
                </type>
            </modelElement>
        </modelElements>
    </template>
    
    <template
        path="templates/jsf2/test/TestCaseImplObject.java.vsl"
        outputPattern="$stringUtils.replace($useCase.packageName, '.', '/')/${className}.java"
        outlet="test-impls"
        overwrite="false">
        <modelElements>
            <modelElement variable="useCase">
                <type name="org.andromda.metafacades.uml.FrontEndUseCase">
                    <property name="views"/>
                </type>
            </modelElement>
        </modelElements>
    </template>         
-->

    <!--  -->

    <template
        path="templates/jsf2/views/facelets/view-hidden-parameters.xhtml.vsl"
        outputPattern="${action.viewFragmentPath}-hidden-params.xhtml"
        outlet="views"
        overwrite="true">
        <modelElements variable="action">
            <modelElement>
                <type name="org.andromda.metafacades.uml.FrontEndAction">
                    <property name="tableLink">false</property>
                    <property name="hiddenParameters"/>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <!-- manageable -->

    <template
        path="templates/jsf2/configuration/crud-functions-taglib.xml.vsl"
        outputPattern="WEB-INF/crud-functions-taglib.xml"
        outlet="configuration"
        overwrite="true"
        outputToSingleFile="true"
        outputOnEmptyElements="false">
        <modelElements>
            <modelElement variable="manageables">
                <type name="org.andromda.cartridges.jsf2.metafacades.JSFManageableEntity">
                    <property name="needsUserInterface"/>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/jsf2/flow/crud/ActionForward.java.vsl"
        outputPattern="$generatedFile"
        outlet="controllers"
        overwrite="true">
        <modelElements variable="manageable">
            <modelElement>
                <type name="org.andromda.cartridges.jsf2.metafacades.JSFManageableEntity">
                    <property name="needsUserInterface"/>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/jsf2/converters/crud/EntityConverter.java.vsl"
        outputPattern="$generatedFile"
        outlet="controllers"
        overwrite="true">
        <modelElements variable="manageable">
            <modelElement>
                <type name="org.andromda.cartridges.jsf2.metafacades.JSFManageableEntity">
                </type>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/jsf2/controllers/crud/Controller.java.vsl"
        outputPattern="$generatedFile"
        outlet="controllers"
        overwrite="true">
        <modelElements variable="manageable">
            <modelElement>
                <type name="org.andromda.cartridges.jsf2.metafacades.JSFManageableEntity">
                    <property name="needsUserInterface"/>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/jsf2/controllers/crud/SearchFilter.java.vsl"
        outputPattern="$generatedFile"
        outlet="controllers"
        overwrite="true">
        <modelElements variable="manageable">
            <modelElement>
                <type name="org.andromda.cartridges.jsf2.metafacades.JSFManageableEntity">
                    <property name="needsUserInterface"/>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/jsf2/controllers/crud/ControllerImpl.java.vsl"
        outputPattern="$generatedFile"
        outlet="controllers"
        overwrite="true">
        <modelElements variable="manageable">
            <modelElement>
                <type name="org.andromda.cartridges.jsf2.metafacades.JSFManageableEntity">
                    <property name="needsUserInterface"/>
                    <property name="needsImplementation">false</property>
                </type>
            </modelElement>
        </modelElements>
    </template>
    
    <template
        path="templates/jsf2/controllers/crud/ControllerImpl.java.vsl"
        outputPattern="$generatedFile"
        outlet="controller-impls"
        overwrite="false">
        <modelElements variable="manageable">
            <modelElement>
                <type name="org.andromda.cartridges.jsf2.metafacades.JSFManageableEntity">
                    <property name="needsUserInterface"/>
                    <property name="needsImplementation">true</property>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/jsf2/forms/crud/Form.java.vsl"
        outputPattern="$generatedFile"
        outlet="forms"
        overwrite="true">
        <modelElements variable="manageable">
            <modelElement>
                <type name="org.andromda.cartridges.jsf2.metafacades.JSFManageableEntity">
                    <property name="needsUserInterface"/>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/jsf2/forms/crud/SearchForm.java.vsl"
        outputPattern="$generatedFile"
        outlet="forms"
        overwrite="true">
        <modelElements variable="manageable">
            <modelElement>
                <type name="org.andromda.cartridges.jsf2.metafacades.JSFManageableEntity">
                    <property name="needsUserInterface"/>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/jsf2/views/facelets/crud-index.xhtml.vsl"
        outputPattern="crud-index.xhtml"
        outlet="views"
        overwrite="true"
        outputToSingleFile="true"
        outputOnEmptyElements="false">
        <modelElements>
            <modelElement variable="manageables">
                <type name="org.andromda.cartridges.jsf2.metafacades.JSFManageableEntity">
                    <property name="needsUserInterface"/>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/jsf2/flow/UseCaseViewPopulator.java.vsl"
        outputPattern="$stringUtils.replace($useCase.packageName, '.', '/')/${className}.java"
        outlet="controllers"
        overwrite="true">
        <modelElements>
            <modelElement variable="useCase">
                <type name="org.andromda.metafacades.uml.FrontEndUseCase">
                    <property name="views"/>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <!-- Trinidad specific -->

    <template
        path="templates/jsf2/utils/ODSFilter.java.vsl"
        outputPattern="$stringUtils.replace($managedBeansPackage, '.', '/')/ODSFilter.java"
        outlet="managed-beans"
        overwrite="true"
        outputCondition="trinidad"/>

    <template
        path="templates/jsf2/views/facelets/trinidad/view.xhtml.vsl"
        outputPattern="${view.path}.xhtml"
        outlet="views"
        overwrite="true"
        outputCondition="trinidad">
        <modelElements variable="view">
            <modelElement>
                <type name="org.andromda.metafacades.uml.FrontEndView">
                    <property name="popup">false</property>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/jsf2/utils/trinidad/NavigationItem.java.vsl"
        outputPattern="$stringUtils.replace($managedBeansPackage, '.', '/')/NavigationItem.java"
        outlet="managed-beans"
        overwrite="true"
        outputCondition="trinidad"/>

    <template
        path="templates/jsf2/utils/trinidad/MenuModelAdapter.java.vsl"
        outputPattern="$stringUtils.replace($managedBeansPackage, '.', '/')/MenuModelAdapter.java"
        outlet="managed-beans"
        overwrite="true"
        outputCondition="trinidad"/>

    <template
        path="templates/jsf2/utils/trinidad/AutocompleteHelper.java.vsl"
        outputPattern="$stringUtils.replace($managedBeansPackage, '.', '/')/AutocompleteHelper.java"
        outlet="managed-beans"
        overwrite="true"
        outputCondition="trinidad"/>

    <template
        path="templates/jsf2/utils/trinidad/AndromdaJsfFilter.java.vsl"
        outputPattern="$stringUtils.replace($managedBeansPackage, '.', '/')/AndromdaJsfFilter.java"
        outlet="managed-beans"
        overwrite="true"
        outputCondition="trinidad"/>

    <template
        path="templates/jsf2/views/facelets/trinidad/layout/layout.xhtml.vsl"
        outputPattern="layout/layout.xhtml"
        outlet="views"
        overwrite="true"
        generateEmptyFiles="true"
        outputCondition="trinidad"/>

    <template
        path="templates/jsf2/views/facelets/trinidad/layout/registration-layout.xhtml.vsl"
        outputPattern="layout/registration-layout.xhtml"
        outlet="views"
        overwrite="true"
        outputToSingleFile="true"
        outputOnEmptyElements="false"
        outputCondition="trinidad">
        <modelElements>
            <modelElement>
                <type name="org.andromda.metafacades.uml.FrontEndUseCase">
                    <property name="registrationUseCase">true</property>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/jsf2/views/facelets/trinidad/layout/header.xhtml.vsl"
        outputPattern="layout/header.xhtml"
        outlet="views"
        overwrite="true"
        generateEmptyFiles="true"
        outputCondition="trinidad"/>

    <template
        path="templates/jsf2/views/facelets/trinidad/layout/messages.xhtml.vsl"
        outputPattern="layout/messages.xhtml"
        outlet="views"
        overwrite="true"
        generateEmptyFiles="true"
        outputCondition="trinidad"/>

    <template
        path="templates/jsf2/views/facelets/trinidad/layout/head.xhtml.vsl"
        outputPattern="layout/head.xhtml"
        outlet="views"
        overwrite="true"
        outputCondition="trinidad"/>

    <template
        path="templates/jsf2/views/facelets/trinidad/layout/footer.xhtml.vsl"
        outputPattern="layout/footer.xhtml"
        outlet="views"
        overwrite="true"
        generateEmptyFiles="true"
        outputCondition="trinidad"/>

    <template
        path="templates/jsf2/views/facelets/trinidad/crud/view.xhtml.vsl"
        outputPattern="$generatedFile"
        outlet="views"
        overwrite="true"
        outputCondition="trinidad">
        <modelElements variable="manageable">
            <modelElement>
                <type name="org.andromda.cartridges.jsf2.metafacades.JSFManageableEntity">
                    <property name="needsUserInterface"/>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/jsf2/views/facelets/trinidad/crud/export-ods.xhtml.vsl"
        outputPattern="$generatedFile"
        outlet="views"
        overwrite="true"
        outputCondition="trinidad">
        <modelElements variable="manageable">
            <modelElement>
                <type name="org.andromda.cartridges.jsf2.metafacades.JSFManageableEntity">
                    <property name="needsUserInterface"/>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/jsf2/views/facelets/trinidad/login.xhtml.vsl"
        outputPattern="${loginFileName}.xhtml"
        outlet="views"
        overwrite="true"
        outputToSingleFile="true"
        outputCondition="trinidad">
        <modelElements>
            <modelElement variable="registrationUseCases">
                <type name="org.andromda.metafacades.uml.FrontEndUseCase">
                    <property name="registrationUseCase"/>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/jsf2/views/facelets/trinidad/view-action.xhtml.vsl"
        outputPattern="${action.viewFragmentPath}.xhtml"
        outlet="views"
        overwrite="true"
        outputCondition="trinidad">
        <modelElements variable="action">
            <modelElement>
                <type name="org.andromda.metafacades.uml.FrontEndAction">
                    <property name="tableLink">false</property>
                    <property name="input"/>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/jsf2/views/facelets/trinidad/view-table.xhtml.vsl"
        outputPattern="${table.view.path}-${table.name}.xhtml"
        outlet="views"
        overwrite="true"
        outputCondition="trinidad">
        <modelElements>
            <modelElement>
                <type name="org.andromda.metafacades.uml.FrontEndView">
                    <property name="tables" variable="table"/>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/jsf2/views/facelets/trinidad/view-variables.xhtml.vsl"
        outputPattern="${view.path}-vars.xhtml"
        outlet="views"
        overwrite="true"
        outputCondition="trinidad">
        <modelElements variable="view">
            <modelElement>
                <type name="org.andromda.metafacades.uml.FrontEndView">
                    <property name="nonTableVariablesPresent"/>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <!-- PrimeFaces specific -->

    <template
        path="templates/jsf2/views/facelets/primefaces/view.xhtml.vsl"
        outputPattern="${view.path}.xhtml"
        outlet="views"
        overwrite="true"
        outputCondition="primefaces">
        <modelElements variable="view">
            <modelElement>
                <type name="org.andromda.metafacades.uml.FrontEndView">
                    <property name="popup">false</property>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/jsf2/views/facelets/primefaces/layout/layout.xhtml.vsl"
        outputPattern="layout/layout.xhtml"
        outlet="views"
        overwrite="true"
        generateEmptyFiles="true"
        outputCondition="primefaces"/>

    <template
        path="templates/jsf2/views/facelets/primefaces/layout/layout-crud.xhtml.vsl"
        outputPattern="layout/layout-crud.xhtml"
        outlet="views"
        overwrite="true"
        generateEmptyFiles="true"
        outputCondition="primefaces"/>

    <template
        path="templates/jsf2/views/facelets/primefaces/layout/navigation.xhtml.vsl"
        outputPattern="layout/navigation.xhtml"
        outlet="views"
        overwrite="true"
        outputToSingleFile="true"
        generateEmptyFiles="true"
        outputCondition="primefaces">
        <modelElements>
            <modelElement variable="useCases">
                <type name="org.andromda.metafacades.uml.FrontEndUseCase"/>
            </modelElement>
            <modelElement variable="manageables">
                <type name="org.andromda.cartridges.jsf2.metafacades.JSFManageableEntity">
                    <property name="needsUserInterface"/>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/jsf2/views/facelets/primefaces/layout/registration-layout.xhtml.vsl"
        outputPattern="layout/registration-layout.xhtml"
        outlet="views"
        overwrite="true"
        outputToSingleFile="true"
        outputOnEmptyElements="false"
        outputCondition="primefaces">
        <modelElements>
            <modelElement>
                <type name="org.andromda.metafacades.uml.FrontEndUseCase">
                    <property name="registrationUseCase">true</property>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/jsf2/views/facelets/primefaces/layout/header.xhtml.vsl"
        outputPattern="layout/header.xhtml"
        outlet="views"
        overwrite="true"
        generateEmptyFiles="true"
        outputCondition="primefaces"/>

    <template
        path="templates/jsf2/views/facelets/primefaces/layout/head.xhtml.vsl"
        outputPattern="layout/head.xhtml"
        outlet="views"
        overwrite="true"
        outputCondition="primefaces"/>

    <template
        path="templates/jsf2/views/facelets/primefaces/layout/footer.xhtml.vsl"
        outputPattern="layout/footer.xhtml"
        outlet="views"
        overwrite="true"
        generateEmptyFiles="true"
        outputCondition="primefaces"/>

    <template
        path="templates/jsf2/views/facelets/primefaces/crud/view.xhtml.vsl"
        outputPattern="$generatedFile"
        outlet="views"
        overwrite="true"
        outputCondition="primefaces">
        <modelElements variable="manageable">
            <modelElement>
                <type name="org.andromda.cartridges.jsf2.metafacades.JSFManageableEntity">
                    <property name="needsUserInterface"/>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/jsf2/views/facelets/primefaces/login.xhtml.vsl"
        outputPattern="${loginFileName}.xhtml"
        outlet="views"
        overwrite="true"
        outputToSingleFile="true"
        outputCondition="primefaces">
        <modelElements>
            <modelElement variable="registrationUseCases">
                <type name="org.andromda.metafacades.uml.FrontEndUseCase">
                    <property name="registrationUseCase"/>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/jsf2/views/facelets/primefaces/view-action.xhtml.vsl"
        outputPattern="${action.viewFragmentPath}.xhtml"
        outlet="views"
        overwrite="true"
        outputCondition="primefaces">
        <modelElements variable="action">
            <modelElement>
                <type name="org.andromda.metafacades.uml.FrontEndAction">
                    <property name="tableLink">false</property>
                    <property name="input"/>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/jsf2/views/facelets/primefaces/view-table.xhtml.vsl"
        outputPattern="${table.view.path}-${table.name}.xhtml"
        outlet="views"
        overwrite="true"
        outputCondition="primefaces">
        <modelElements>
            <modelElement>
                <type name="org.andromda.metafacades.uml.FrontEndView">
                    <property name="tables" variable="table"/>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/jsf2/views/facelets/primefaces/view-variables.xhtml.vsl"
        outputPattern="${view.path}-vars.xhtml"
        outlet="views"
        overwrite="true"
        outputCondition="primefaces">
        <modelElements variable="view">
            <modelElement>
                <type name="org.andromda.metafacades.uml.FrontEndView">
                    <property name="nonTableVariablesPresent"/>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <!-- cartridge-template merge-point -->

</cartridge>