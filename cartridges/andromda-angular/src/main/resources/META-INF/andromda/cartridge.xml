<cartridge>

    <templateEngine className="org.andromda.templateengines.velocity.VelocityTemplateEngine">
        <macrolibrary name="templates/jsf2/escapeMacros.vm"/>
        <macrolibrary name="templates/jsf2/controllers/Controller.java.vm"/>
        <macrolibrary name="templates/jsf2/views/facelets/trinidad/renderActionFormInputTrinidad.vm"/>
        <macrolibrary name="templates/jsf2/views/facelets/primefaces/renderActionFormInputPrimeFaces.vm"/>
        <macrolibrary name="templates/jsf2/views/renderActionCommandLinkParameter.vm"/>
        <macrolibrary name="templates/jsf2/views/renderTableCommandLinkParameters.vm"/>
        <macrolibrary name="templates/jsf2/forms/formMacros.vm"/>
        <macrolibrary name="templates/jsf2/forms/formImplMacros.vm"/>
        <macrolibrary name="templates/jsf2/configuration/securityMacros.vm"/>
    </templateEngine>

    <!-- define the template objects that are made available to the template -->
    <templateObject name="stringUtils" className="org.apache.commons.lang3.StringUtils"/>
    <templateObject name="javaUtils" className="org.andromda.cartridges.java.JavaUtils"/>
    <templateObject name="umlUtils" className="org.andromda.metafacades.uml.UMLMetafacadeUtils"/>
    <templateObject name="angularHelper" className="org.andromda.cartridges.angular.AngularHelper"/>

    <!-- cartridge-templateObject merge-point-->

    <templatePostProcessor className="org.andromda.core.common.ImportBeautifierPostProcessorImpl"/>
    
    <property reference="generateRefFiles"/>
    <property reference="overwriteAll"/>
    <property reference="toDoTag"/>
    <property reference="enableTemplating"/>
    <property reference="applicationName"/>    
    <property reference="applicationId"/>
    <property reference="applicationPackage"/>
    
    <condition name="generateRefFiles">$generateRefFiles.equalsIgnoreCase("true")</condition>
    <condition name="overwriteAll">$overwriteAll.equalsIgnoreCase("true")</condition>
    <condition name="enableTemplating">$enableTemplating.equalsIgnoreCase("true")</condition>

    <template
        path="templates/angular/app/app.module.ts.vsl"
        outputPattern="${appModule}.module.ts"
        outlet="angularAppDir"
        overwrite="true"
        outputToSingleFile="true">
        <modelElements>
            <modelElement variable="useCases">
                <type name="org.andromda.metafacades.uml.FrontEndUseCase"/>
            </modelElement>
        </modelElements>
    </template>
    <template
        path="templates/angular/app/model/model.ts.vsl"
        outputPattern="$destination/${fileName}.ts"
        outlet="models"
        overwrite="true">
        <modelElements variable="class">
            <modelElement>
                <type name="org.andromda.metafacades.uml.ValueObject"/>
            </modelElement>
        </modelElements>
    </template>
    <template
        path="templates/angular/app/model/spec.ts.vsl"
        outputPattern="$destination/${fileName}.spec.ts"
        outlet="models"
        overwrite="true">
        <modelElements variable="class">
            <modelElement>
                <type name="org.andromda.metafacades.uml.ValueObject"/>
            </modelElement>
        </modelElements>
    </template>
    
    <!--<template
        path="templates/angular/app/service/service.ts.vsl"
        outputPattern="service.ts"
        outlet="services"
        overwrite="true">
        <modelElements variable="controller">
            <modelElement>
                <type name="org.andromda.metafacades.uml.Service"/>
            </modelElement>
        </modelElements>
    </template>-->
    
    <template
        path="templates/angular/app/service/service.ts.vsl"
        outputPattern="$generatedFile"
        outlet="services"
        overwrite="true">
        <modelElements variable="service">
            <modelElement>
                <type name="org.andromda.metafacades.uml.FrontEndController">
                    <property name="useCase"/>
                </type>
            </modelElement>
        </modelElements>
    </template>
    
    <template
        path="templates/angular/app/app-routing.module.ts.vsl"
        outputPattern="$stringUtils.lowerCase(${applicationId})-routing.module.ts"
        outlet="angularAppDir"
        overwrite="true"
        outputToSingleFile="true">
        <modelElements>
            <modelElement variable="useCases">
                <type name="org.andromda.metafacades.uml.FrontEndUseCase"/>
            </modelElement>
            <modelElement variable="manageables">
                <type name="org.andromda.cartridges.jsf2.metafacades.JSFManageableEntity">
                    <property name="needsUserInterface"/>
                </type>
            </modelElement>
        </modelElements>
    </template>
    
    <!--<template
            path="templates/angular/app/service/service.impl.ts.vsl"
            outputPattern="services.ts"
            outlet="service-impls"
            overwrite="false"
            outputToSingleFile="true"
            outputOnEmptyElements="false">
        <modelElements variable="serviceImpl">
            <modelElement>
                <type name="org.andromda.metafacades.uml.FrontEndController">
                    <property name="useCase"/>
                </type>
            </modelElement>
        </modelElements>
    </template>-->

    <!--<template
            path="templates/angular/App.js.vsl"
            outputPattern="app.js"
            outlet="controllers"
            outputToSingleFile="true"
            outputOnEmptyElements="false"
            overwrite="true">
        <modelElements variable="controllers">
            <modelElement>
                <type name="org.andromda.metafacades.uml.FrontEndController">
                    <property name="useCase"/>
                </type>
            </modelElement>
            <modelElement>
                <type name="org.andromda.cartridges.angular.metafacades.AngularFactory"/>
            </modelElement>
        </modelElements>
    </template>-->
    <!--<template
            path="templates/angular/controllers/Controllers.vsl"
            outputPattern="components/controllers.js"
            outlet="controllers"
            outputToSingleFile="true"
            outputOnEmptyElements="false"
            overwrite="true">
        <modelElements variable="controllers">
            <modelElement>
                <type name="org.andromda.cartridges.angular.metafacades.AngularController">
                    <property name="useCase"/>
                </type>
            </modelElement>
            <modelElement>
                <type name="org.andromda.cartridges.angular.metafacades.AngularAction">
                    <property name="useCase"/>
                </type>
            </modelElement>
        </modelElements>
    </template>-->
    <!--<template
        path="templates/angular/app/model/model.ts.vsl"
        outputPattern="src/app/model/{1}/{1}.ts"
        outlet="controllers"
        outputToSingleFile="false"
        overwrite="true">
        <modelElements variable="viewer">
            <modelElement>
                <type name="org.andromda.cartridges.angular.metafacades.AngularView">
                    <property name="useCase"/>
                </type>
            </modelElement>
        </modelElements>
    </template>-->
    <template
            path="templates/angular/app/view/View.vsl"
            outputPattern="components/{1}/{1}.html"
            outlet="controllers"
            outputToSingleFile="false"
            overwrite="true">
        <modelElements variable="viewer">
            <modelElement>
                <type name="org.andromda.cartridges.angular.metafacades.AngularView">
                    <property name="useCase"/>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <!--<template
            path="templates/angular/views/HomeScreen.vsl"
            outputPattern="index.html"
            outlet="controllers"
            outputToSingleFile="true"
            overwrite="true">
        <modelElements variable="pages">
            <modelElement>
                <type name="org.andromda.cartridges.angular.metafacades.AngularController">
                    <property name="useCase"/>
                </type>
            </modelElement>
            <modelElement>
                <type name="org.andromda.cartridges.angular.metafacades.AngularFactory"/>
            </modelElement>
        </modelElements>
    </template>-->
    <!--<template
            path="templates/angular/views/Header.vsl"
            outputPattern="components/Header.html"
            outlet="controllers"
            outputToSingleFile="true"
            overwrite="true">
        <modelElements variable="pages">
            <modelElement>
                <type name="org.andromda.cartridges.angular.metafacades.AngularController">
                    <property name="useCase"/>
                </type>
            </modelElement>
        </modelElements>
    </template>-->

    <!--<template
            path="templates/angular/views/Content.vsl"
            outputPattern="components/Content.html"
            outlet="controllers"
            outputToSingleFile="true"
            overwrite="true">
        <modelElements variable="pages">
            <modelElement>
                <type name="org.andromda.metafacades.uml.FrontEndController">
                    <property name="useCase"/>
                </type>
            </modelElement>
            <modelElement>
                <type name="org.andromda.cartridges.angular.metafacades.AngularFactory"/>
            </modelElement>
        </modelElements>
    </template>-->
</cartridge>