// license-header java merge-point
//
// Generated by: MetafacadeLogicImpl.vsl in andromda-meta-cartridge.
package org.andromda.cartridges.angular.metafacades;

import org.andromda.cartridges.angular.AngularGlobals;
import org.andromda.utils.StringUtilsHelper;

/**
 * A front-end JSF even (like the pressing of a button, etc). MetafacadeLogic
 * implementation for org.andromda.cartridges.angular.metafacades.AngularEvent.
 *
 * @see org.andromda.cartridges.angular.metafacades.AngularEvent
 */
public class AngularEventLogicImpl
    extends AngularEventLogic
{
    private static final long serialVersionUID = 34L;
    /**
     * Public constructor for AngularEventLogicImpl
     * @see org.andromda.cartridges.angular.metafacades.AngularEvent
     */
    public AngularEventLogicImpl (Object metaObject, String context)
    {
        super(metaObject, context);
    }

    /**
     * The resource message key for this trigger.
     * @see org.andromda.cartridges.angular.metafacades.AngularEvent#getMessageKey()
     */
    protected String handleGetMessageKey()
    {
        String triggerKey = StringUtilsHelper.toResourceMessageKey(getName());
        if (!this.isNormalizeMessages())
        {
            final AngularAction action = (AngularAction)this.getAction();
            if (action != null)
            {
                final AngularView view = (AngularView)action.getInput();
                if (view != null)
                {
                    triggerKey = view.getMessageKey() + '.' + triggerKey;
                }
            }
        }
        return triggerKey;
    }

    /**
     * The resource message value  for this trigger, this would be the button label or hyperlink
     * name.
     * @see org.andromda.cartridges.angular.metafacades.AngularEvent#getMessageValue()
     */
    protected String handleGetMessageValue()
    {
        return StringUtilsHelper.toPhrase(this.getName());
    }

    /**
     * The resource message key for the reset button.
     * @see org.andromda.cartridges.angular.metafacades.AngularEvent#getResetMessageKey()
     */
    protected String handleGetResetMessageKey()
    {
        return this.getMessageKey() + ".reset.message";
    }

    /**
     * The default value for the reset button's message.
     * @see org.andromda.cartridges.angular.metafacades.AngularEvent#getResetMessageValue()
     */
    protected String handleGetResetMessageValue()
    {
        return "Reset";
    }

    /**
     * Indicates whether or not we should normalize messages.
     * @return normalizeMessages true/false
     */
    private boolean isNormalizeMessages()
    {
        final String normalizeMessages = (String)getConfiguredProperty(AngularGlobals.NORMALIZE_MESSAGES);
        return Boolean.valueOf(normalizeMessages).booleanValue();
    }
}
