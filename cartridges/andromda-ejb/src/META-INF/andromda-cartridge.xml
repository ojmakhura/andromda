<cartridge name="ejb">

    <!-- define the template objects that are made availble to the template -->
    <templateObject name="str" className="org.apache.commons.lang.StringUtils"/>
    <templateObject name="transform" className="org.andromda.cartridges.ejb.EJBScriptHelper"/>
	
	<!-- ValueObjects for Entity Beans -->
	<template
        path="templates/ValueObject.vsl"
        outputPattern="{0}/{1}.java"
        outlet="value-objects"
        overwrite="true"
        required="false">
        <modelElements variable="class">
            <modelElement>
                <type name="org.andromda.cartridges.ejb.metafacades.ValueObjectFacade"/>
            </modelElement>    
        </modelElements>
    </template>
	
	<!-- Entity Beans -->
    <template
        path="templates/EntityBean.vsl"
        outputPattern="{0}/{1}Bean.java"
        outlet="entity-beans"
        overwrite="true">
        <modelElements variable="entity">
            <modelElement>
                <type name="org.andromda.cartridges.ejb.metafacades.EJBEntityFacade"/>
            </modelElement>    
        </modelElements>
    </template>

    <template
        path="templates/EntityLocal.vsl"
        outputPattern="{0}/{1}.java"
        outlet="entity-beans"
        overwrite="true">
        <modelElements variable="entity">
            <modelElement>
                <type name="org.andromda.cartridges.ejb.metafacades.EJBEntityFacade"/>
            </modelElement>  
        </modelElements>
    </template>

    <template
        path="templates/EntityHome.vsl"
        outputPattern="{0}/{1}LocalHome.java"
        outlet="entity-beans"
        overwrite="true">
        <modelElements variable="entity">
            <modelElement>
                <type name="org.andromda.cartridges.ejb.metafacades.EJBEntityFacade"/>
            </modelElement>
        </modelElements>
    </template>
    
    <template
        path="templates/EntityBeanImpl.vsl"
        outputPattern="{0}/{1}BeanImpl.java"
        outlet="entity-impls"
        overwrite="false">
        <modelElements variable="entity">
            <modelElement>
                <type name="org.andromda.cartridges.ejb.metafacades.EJBEntityFacade"/>
            </modelElement>
        </modelElements>  
    </template>
    
<!--
     The following definitions map services to session beans.
     The templates map a service to a session bean
     and the template itself decides to generate a stateless or stateful
     session bean, based on the fact that the UML class contains attributes or not.
     (Matthias Bohlen)
-->

    <template
        path="templates/SessionBean.vsl"
        outputPattern="{0}/{1}Bean.java"
        outlet="session-beans"
        overwrite="true">
        <modelElements variable="service">
            <modelElement>
                <type name="org.andromda.cartridges.ejb.metafacades.EJBSessionFacade"/>
            </modelElement>
        </modelElements> 
    </template>
    
    <template
        path="templates/SessionLocal.vsl"
        outputPattern="{0}/{1}Local.java"
        outlet="session-beans"
        overwrite="true"
        generateEmptyFiles="false">
        <modelElements variable="service">        
            <modelElement>
                <type name="org.andromda.cartridges.ejb.metafacades.EJBSessionFacade"/>
            </modelElement>
        </modelElements>       
    </template>

    <template
        path="templates/SessionRemote.vsl"
        outputPattern="{0}/{1}.java"
        outlet="session-beans"
        overwrite="true"
        generateEmptyFiles="false">
        <modelElements variable="service">            
            <modelElement>
                <type name="org.andromda.cartridges.ejb.metafacades.EJBSessionFacade"/>
            </modelElement>
        </modelElements> 
    </template>

    <template
        path="templates/SessionLocalHome.vsl"
        outputPattern="{0}/{1}LocalHome.java"
        outlet="session-beans"
        overwrite="true"
        generateEmptyFiles="false">
        <modelElements variable="service">           
            <modelElement>
                <type name="org.andromda.cartridges.ejb.metafacades.EJBSessionFacade"/>
            </modelElement>
        </modelElements>   
    </template>

    <template
        path="templates/SessionRemoteHome.vsl"
        outputPattern="{0}/{1}Home.java"
        outlet="session-beans"
        overwrite="true"
        generateEmptyFiles="false">
        <modelElements variable="service">               
            <modelElement>
                <type name="org.andromda.cartridges.ejb.metafacades.EJBSessionFacade"/>
            </modelElement>
        </modelElements>  
    </template>

    <template
        path="templates/SessionBeanImpl.vsl"
        outputPattern="{0}/{1}BeanImpl.java"
        outlet="session-impls"
        overwrite="false">
        <modelElements variable="service">          
            <modelElement>
                <type name="org.andromda.cartridges.ejb.metafacades.EJBSessionFacade"/>
            </modelElement>
        </modelElements> 
    </template>
</cartridge>
